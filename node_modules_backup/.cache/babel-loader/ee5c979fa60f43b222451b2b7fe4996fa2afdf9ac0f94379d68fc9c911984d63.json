{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { defineStore } from 'pinia';\nimport sdk, { EventType } from 'matrix-js-sdk';\nimport { convertCompilerOptionsFromJson } from 'typescript';\nconst loginCreds = {\n  //accessToken: \"syt_b2JzZXJ2ZXJ6ZXJv_qbsSNMdGRZpXMsNvXJeX_3OODDh\",\n  accessToken: \"syt_c2lydG91Zw_NskGmfGSoPcYMAeosoHo_0zeoWw\",\n  userId: \"@sirtoug:home.parecon.work\",\n  baseUrl: 'http://localhost:8008'\n};\nconst client = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n  accessToken: loginCreds.accessToken,\n  userId: loginCreds.userId\n});\nconst localClient = sdk.createClient({\n  baseUrl: loginCreds.baseUrl\n});\nfunction createUser(username, password) {\n  // TODO: Add a room for the user that handles additional user information, such as hashtags, description, images,\n  // TODO - friends lists, following, memberships, etc.\n}\nfunction getHandleFromUserId() {\n  return loginCreds.userId.replace(/:.*/, '');\n}\nfunction getHandleFromRoomId(id) {\n  return id.replace(/:.*/, '');\n}\nclient.startClient();\nfunction login() {\n  client.loginWithPassword('username', 'password').then(() => {\n    console.log('Logged in!');\n  });\n}\nfunction getIdentifiedListOfGroups(ids) {\n  Object.entries(ids => {\n    console.log(ids.id);\n  });\n}\n\n// GETTERS\n\nfunction getRoomTopicFromRoomObject(room) {\n  let topic = room.currentState.getStateEvents('m.room.topic', '');\n  try {\n    return JSON.parse(topic.event.content.topic);\n  } catch (error) {\n    console.log(error);\n    if (topic == String) return topic;\n    return \"We do nothing!\";\n  }\n}\nfunction getRoomType(roomId) {\n  let room = client.getRoom(roomId);\n  let type = room.currentState.getStateEvents('m.room.create', '');\n  try {\n    return type.event.content.type;\n  } catch (error) {\n    return 'no type for you!!';\n  }\n}\nfunction getRoomName(room) {\n  let roomName = room.name;\n  return roomName;\n}\nfunction returnRoomNamesFromRoomObject(rooms) {\n  const roomNames = rooms.map(room => room.name);\n  return roomNames;\n}\nfunction returnRoomIdsFromRoomObject(rooms) {\n  const roomIds = rooms.map(room => room.roomId);\n  return roomIds;\n}\nfunction returnRoomTypeFromRoomObject(rooms) {\n  const roomTypes = rooms.map(room => getRoomType(room.id));\n}\nfunction getRoomById(roomId) {\n  const room = client.getRoom(roomId);\n  console.log(room);\n  console.log(roomId);\n  const name = room.name;\n  const topic = getRoomTopicFromRoomObject(room);\n  const group = {\n    name: name,\n    topic: topic\n  };\n  console.log(topic.text);\n  return group;\n}\nfunction isParent() {\n  return;\n}\nfunction isChild() {\n  return;\n}\nasync function getOwnProfile() {\n  let responseFromServer = await client.getProfileInfo(loginCreds.userId);\n  responseFromServer.handle = getHandleFromUserId();\n  responseFromServer.displayname = JSON.parse(responseFromServer.displayname);\n  //responseFromServer.events = JSON.parse(responseFromServer.events)\n  console.log(responseFromServer);\n  return responseFromServer;\n}\nasync function printProfile() {\n  console.log(await client.getProfileInfo(loginCreds.userId));\n}\nfunction getRoomTimeline(roomId) {\n  let room = client.getRoom(roomId);\n  let commentArray = [];\n  room.timeline.forEach(t => {\n    commentArray.push(t.event);\n    //console.log(JSON.stringify(t.event));\n  });\n\n  return commentArray;\n}\nfunction returnIdOfChildrenInSpace(spaceId) {\n  let space = client.getRoom(spaceId);\n  let childrenMap;\n  try {\n    childrenMap = space.relations.room.currentState.events;\n  } catch (_unused) {\n    return;\n  }\n  let roomArray = [];\n  let roomChildren = [];\n  let arrayOfRoomIds = [];\n  let childrenIds = [];\n  roomArray = Array.from(childrenMap, function (entry) {\n    return {\n      key: entry[0],\n      value: entry[1]\n    };\n  });\n  roomArray.forEach(room => {\n    if (room.key === 'm.space.child') {\n      roomChildren = room.value;\n    }\n  });\n  roomArray = Array.from(roomChildren, function (entry) {\n    return {\n      key: entry[0],\n      value: entry[1]\n    };\n  });\n  roomArray.forEach(room => {\n    arrayOfRoomIds.push(room.key);\n  });\n  //console.log(roomArray)\n  return arrayOfRoomIds;\n}\nfunction getChildren(spaceId) {\n  let ids = returnIdOfChildrenInSpace(spaceId);\n  let roomObjects = [];\n  ids.forEach(id => {\n    roomObjects.push(client.getRoom(id));\n  });\n  //console.log(roomObjects)\n  return roomObjects;\n}\nfunction getGroupContent(groupId) {\n  let content = {};\n  let groups = getChildren(groupId);\n  groups.forEach(child => {\n    if (child != null) {\n      let name = child.name;\n      let children = getChildren(child.roomId);\n      let arrayOfTopics = [];\n      let idAndTopicObject = {};\n      content[name] = {};\n      children.forEach(item => {\n        try {\n          let creator = item.currentState.getStateEvents('m.room.create', '');\n          idAndTopicObject[item.roomId] = {\n            creator: creator.event.content.creator,\n            topic: getRoomTopicFromRoomObject(item),\n            content: getRoomTimeline(item.roomId),\n            id: item.roomId\n          };\n        } catch (_unused2) {\n          return;\n        }\n      });\n      content[name] = idAndTopicObject;\n    }\n  });\n  //console.log(content)\n  return content;\n}\nfunction getChatContent(groupId) {\n  let content = getGroupContent(groupId);\n  return content.chat;\n}\nfunction getBoardContent(groupId) {\n  let content = getGroupContent(groupId);\n  return content.board;\n}\nfunction produceHrefAddressesForGroups(rooms) {\n  const roomIds = rooms.map(room => {\n    let id = room.roomId.replace(/:.*/, '');\n    id = id.replace(/!/, '');\n    id = \"/tabs/group/\" + id;\n    return id;\n  });\n  // roomIds.forEach(roomId => console.log(roomId))\n  return roomIds;\n}\nfunction getGroups() {\n  let rooms = client.getRooms();\n  console.log(rooms);\n  let roomNamesAndIdsAsObject = {};\n  let roomNames = returnRoomNamesFromRoomObject(rooms);\n  let roomIds = returnRoomIdsFromRoomObject(rooms);\n  let hrefs = produceHrefAddressesForGroups(rooms);\n  let roomHandles = roomIds.map(roomId => getHandleFromRoomId(roomId));\n  let roomTopics = rooms.map(room => getRoomTopicFromRoomObject(room));\n  let roomTypes = roomIds.map(roomId => getRoomType(roomId));\n  let roomProduct = [];\n  for (let i = 0; i < roomNames.length; i++) {\n    roomProduct.push({\n      name: roomNames[i],\n      id: roomIds[i],\n      topic: roomTopics[i],\n      type: roomTypes[i],\n      handle: roomHandles[i],\n      href: hrefs[i]\n    });\n  }\n  Object.assign(roomNamesAndIdsAsObject, roomProduct);\n  console.log(rooms);\n  return roomNamesAndIdsAsObject;\n}\n\n// SETTERS\n\nfunction createSubSpace(parentSpaceId, subSpaceName, subSpaceTopic, roomId) {\n  client.sendStateEvent(roomId, 'm.space.parent', {\n    via: ['home.parecon.work'],\n    state_key: parentSpaceId,\n    canonical: true\n  });\n  return;\n}\n\n// TODO: add type for space or room\nfunction createGroup(groupName, topic, type) {\n  let topicObject = {\n    text: topic,\n    banner: \"factory\"\n  };\n  let topicString = JSON.stringify(topicObject);\n  client.createRoom({\n    name: groupName,\n    visibility: 'private',\n    topic: topicString,\n    creation_content: {\n      type: 'm.space'\n    }\n  }).then(response => {\n    // console.log(type)\n    // console.log(`Room created: ${response.room_id}`)\n    //client.sendStateEvent(response.room_id, 'm.room.create', {room_type: 'm.space'})\n  }).catch(error => {\n    console.error(`Error creating room: ${error}`);\n  });\n}\n\n// TODO: add type for space or room\nfunction createSpace(groupName, topic) {\n  let returnValue = '';\n  client.createRoom({\n    name: groupName,\n    visibility: 'private',\n    topic: topic,\n    creation_content: {\n      type: 'm.space'\n    }\n  }).then(response => {\n    // console.log(type)\n    console.log(`Room created: ${response.room_id}`);\n    returnValue = response.room_id;\n    //client.sendStateEvent(response.room_id, 'm.room.create', {room_type: 'm.space'})\n  }).catch(error => {\n    console.error(`Error creating room: ${error}`);\n  });\n  return returnValue;\n}\nfunction assignChild(parentSpaceId, subSpaceId) {\n  client.sendStateEvent(parentSpaceId, 'm.space.child', {\n    via: ['home.parecon.work']\n  }, subSpaceId).then(error => {\n    console.log(error);\n  });\n  console.log(\"assigned child\");\n}\nfunction assignParent(subSpaceId, parentSpaceId) {\n  client.sendStateEvent(subSpaceId, 'm.space.parent', {\n    canonical: true,\n    via: ['home.parecon.work']\n  }, parentSpaceId);\n  console.log(\"assigned parent\");\n}\nfunction assignParentAndChild(parentSpaceId, subSpaceId) {\n  return;\n}\nfunction createRealGroup(groupName, topic) {\n  // TODO: add rooms that identify group as parent and canonical parent, and add child identifier on the space.\n  // TODO - power levels will hopefully isolate the rooms as necessary to the space.\n  let mainSpace = createSpace(groupName, topic);\n  let chatSpace = createSpace(\"chat\", '{}');\n  let boardSpace = createSpace(\"board\", '{}');\n  let internalGroup = createGroup(\"groups\", '{}');\n  console.log(mainSpace);\n  return;\n}\nfunction joinGroup(groupId) {\n  client.joinRoom(groupId).then(response => {\n    //console.log(`Joined room: ${response.room_id}`)\n  }).catch(error => {\n    //console.error(`Error joining room: ${error}`)\n  });\n}\nasync function getRoomState() {\n  let shortlist = [];\n  let shortlistObject = {};\n  let response = await client.roomState(\"!OGEhHVWSdvArJzumhm:matrix.org\").then(response => {\n    for (let i = 0; i < 100; i++) {\n      shortlist.push(response[i]);\n      Object.assign(shortlistObject, shortlist);\n    }\n    return shortlistObject;\n  });\n  //console.log(response)\n  return response;\n}\nasync function getMessages(roomId) {\n  client.initialSync(roomId).then(response => {\n    const timeline = response.timeline;\n    console.log(timeline);\n    // Do something with the timeline, such as render it in a chat interface\n  }).catch(error => {\n    console.error(`Error fetching initial sync for room ${roomId}: ${error}`);\n  });\n}\nfunction sendMessage(roomId, message) {\n  const content = {\n    body: \"A hobbit trying to scale mount everest\",\n    msgtype: \"m.text\"\n  };\n  client.sendEvent(\"roomId\", \"m.room.message\", content, \"\", (err, res) => {\n    console.log(err);\n  });\n}\nfunction updateTimeline(roomId) {\n  client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n    if (toStartOfTimeline) {\n      var messageToAppend = room.timeline[room.timeline.length - 1];\n      console.log(messageToAppend);\n      console.log(\"wow\");\n      return messageToAppend;\n    }\n  });\n}\nasync function getMembersOfRoom(roomId) {\n  let room = await client.getRoom(roomId);\n  let members = room.getMembers();\n  console.log(members);\n  return members;\n}\nfunction sendText(roomId, text) {\n  client.sendTextMessage(roomId, text);\n}\nfunction accountData() {\n  return client.getAccountData();\n}\n\n// TODO - Add a getter to get a room's timeline\n// TODO - Get a filter to get a group's associated groups\n// TODO -\n// TODO: Ranking functionality of group membership to curate what appears on top\n// TODO - of the list on group profile. Use the \"suggested\" value of space children\n// TODO - to determine whether the rooms are considered important. Canonical parent\n// TODO - is also useful\n\nexport const useMatrixClient = defineStore('matrix-client', {\n  state: () => {\n    return {\n      client,\n      getGroups,\n      getOwnProfile,\n      createGroup,\n      getMembersOfRoom,\n      returnIdOfChildrenInSpace,\n      getChildren,\n      getRoomById,\n      getRoomTimeline,\n      getGroupContent,\n      getChatContent,\n      getMessages,\n      login,\n      sendText,\n      accountData,\n      assignParent,\n      assignChild,\n      createRealGroup\n    };\n  },\n  getters: {\n    getRooms: state => () => {\n      return state.getRooms();\n    },\n    updateTimeline: state => () => {\n      return updateTimeline();\n    },\n    getRoomState: state => () => {\n      return getRoomState();\n    }\n  },\n  setters: {\n    createGroup: state => groupName => {\n      return state.createGroup(groupName);\n    },\n    login: state => () => {\n      return state.login();\n    }\n  }\n});","map":{"version":3,"names":["defineStore","sdk","EventType","convertCompilerOptionsFromJson","loginCreds","accessToken","userId","baseUrl","client","createClient","localClient","createUser","username","password","getHandleFromUserId","replace","getHandleFromRoomId","id","startClient","login","loginWithPassword","then","console","log","getIdentifiedListOfGroups","ids","Object","entries","getRoomTopicFromRoomObject","room","topic","currentState","getStateEvents","JSON","parse","event","content","error","String","getRoomType","roomId","getRoom","type","getRoomName","roomName","name","returnRoomNamesFromRoomObject","rooms","roomNames","map","returnRoomIdsFromRoomObject","roomIds","returnRoomTypeFromRoomObject","roomTypes","getRoomById","group","text","isParent","isChild","getOwnProfile","responseFromServer","getProfileInfo","handle","displayname","printProfile","getRoomTimeline","commentArray","timeline","forEach","t","push","returnIdOfChildrenInSpace","spaceId","space","childrenMap","relations","events","roomArray","roomChildren","arrayOfRoomIds","childrenIds","Array","from","entry","key","value","getChildren","roomObjects","getGroupContent","groupId","groups","child","children","arrayOfTopics","idAndTopicObject","item","creator","getChatContent","chat","getBoardContent","board","produceHrefAddressesForGroups","getGroups","getRooms","roomNamesAndIdsAsObject","hrefs","roomHandles","roomTopics","roomProduct","i","length","href","assign","createSubSpace","parentSpaceId","subSpaceName","subSpaceTopic","sendStateEvent","via","state_key","canonical","createGroup","groupName","topicObject","banner","topicString","stringify","createRoom","visibility","creation_content","response","catch","createSpace","returnValue","room_id","assignChild","subSpaceId","assignParent","assignParentAndChild","createRealGroup","mainSpace","chatSpace","boardSpace","internalGroup","joinGroup","joinRoom","getRoomState","shortlist","shortlistObject","roomState","getMessages","initialSync","sendMessage","message","body","msgtype","sendEvent","err","res","updateTimeline","on","toStartOfTimeline","messageToAppend","getMembersOfRoom","members","getMembers","sendText","sendTextMessage","accountData","getAccountData","useMatrixClient","state","getters","setters"],"sources":["/Users/observerzero/Project/Dev/icoo/src/stores/MatrixClient.js"],"sourcesContent":["import {defineStore} from 'pinia'\nimport sdk, {EventType} from 'matrix-js-sdk'\nimport { convertCompilerOptionsFromJson } from 'typescript'\n\nconst loginCreds = {\n  //accessToken: \"syt_b2JzZXJ2ZXJ6ZXJv_qbsSNMdGRZpXMsNvXJeX_3OODDh\",\n  accessToken: \"syt_c2lydG91Zw_NskGmfGSoPcYMAeosoHo_0zeoWw\",\n  userId: \"@sirtoug:home.parecon.work\",\n  baseUrl: 'http://localhost:8008'\n}\n\nconst client = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n  accessToken: loginCreds.accessToken,\n  userId: loginCreds.userId,\n})\n\nconst localClient = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n})\n\nfunction createUser(username, password) {\n  // TODO: Add a room for the user that handles additional user information, such as hashtags, description, images,\n  // TODO - friends lists, following, memberships, etc.\n}\n\nfunction getHandleFromUserId() {\n  return loginCreds.userId.replace(/:.*/, '')\n}\n\nfunction getHandleFromRoomId(id) {\n  return id.replace(/:.*/, '')\n}\n\nclient.startClient()\n\nfunction login() {\n  client.loginWithPassword('username', 'password').then(() => {\n    console.log('Logged in!')\n  })\n}\n\nfunction getIdentifiedListOfGroups(ids) {\n  Object.entries(ids => {\n    console.log(ids.id)\n  })\n}\n\n// GETTERS\n\nfunction getRoomTopicFromRoomObject(room) {\n  let topic = room.currentState.getStateEvents('m.room.topic', '')\n  try {\n    return JSON.parse(topic.event.content.topic)\n  } catch (error) {\n    console.log(error)\n    if (topic == String)\n      return topic\n    return \"We do nothing!\"\n  }\n}\n\nfunction getRoomType(roomId) {\n  let room = client.getRoom(roomId)\n  let type = room.currentState.getStateEvents('m.room.create', '')\n  try {\n    return type.event.content.type\n  } catch (error) {\n    return 'no type for you!!'\n  }\n}\n\nfunction getRoomName(room) {\n  let roomName = room.name\n  return roomName\n}\n\nfunction returnRoomNamesFromRoomObject(rooms) {\n  const roomNames = rooms.map(room => room.name)\n  return roomNames\n}\n\nfunction returnRoomIdsFromRoomObject(rooms) {\n  const roomIds = rooms.map(room => room.roomId)\n  return roomIds\n}\n\nfunction returnRoomTypeFromRoomObject(rooms) {\n  const roomTypes = rooms.map(room => getRoomType(room.id))\n}\n\nfunction getRoomById(roomId) {\n  const room = client.getRoom(roomId)\n  console.log(room)\n  console.log(roomId)\n  const name = room.name\n  const topic = getRoomTopicFromRoomObject(room)\n  const group = {\n    name: name,\n    topic: topic,\n  }\n  console.log(topic.text)\n  return group\n}\n\nfunction isParent() {\n  return\n}\n\nfunction isChild() {\n  return\n}\n\nasync function getOwnProfile() {\n  let responseFromServer = await client.getProfileInfo(loginCreds.userId)\n  responseFromServer.handle = getHandleFromUserId()\n  responseFromServer.displayname = JSON.parse(responseFromServer.displayname)\n  //responseFromServer.events = JSON.parse(responseFromServer.events)\n  console.log(responseFromServer)\n  return responseFromServer\n}\n\nasync function printProfile() {\n  console.log(await client.getProfileInfo(loginCreds.userId))\n}\n\nfunction getRoomTimeline(roomId) {\n  let room = client.getRoom(roomId)\n  let commentArray = []\n  room.timeline.forEach(t => {\n    commentArray.push(t.event)\n    //console.log(JSON.stringify(t.event));\n  });\n  return commentArray\n}\n\nfunction returnIdOfChildrenInSpace(spaceId) {\n  let space = client.getRoom(spaceId)\n  let childrenMap\n  try {\n    childrenMap = space.relations.room.currentState.events\n  } catch {\n    return\n  }\n  let roomArray = []\n  let roomChildren = []\n  let arrayOfRoomIds = []\n  let childrenIds = []\n  roomArray = Array.from(childrenMap, function (entry) {\n    return {key: entry[0], value: entry[1]};\n  });\n  roomArray.forEach(room => {\n    if (room.key === 'm.space.child') {\n      roomChildren = room.value\n    }\n  })\n  roomArray = Array.from(roomChildren, function (entry) {\n    return {key: entry[0], value: entry[1]};\n  });\n  roomArray.forEach(room => {\n    arrayOfRoomIds.push(room.key)\n  })\n  //console.log(roomArray)\n  return arrayOfRoomIds\n}\n\nfunction getChildren(spaceId) {\n  let ids = returnIdOfChildrenInSpace(spaceId)\n  let roomObjects = []\n  ids.forEach(id => {\n    roomObjects.push(client.getRoom(id))\n  })\n  //console.log(roomObjects)\n  return roomObjects\n}\n\nfunction getGroupContent(groupId) {\n  let content = {}\n  let groups = getChildren(groupId)\n  groups.forEach(child => {\n    if (child != null) {\n      let name = child.name\n      let children = getChildren(child.roomId)\n      let arrayOfTopics = []\n      let idAndTopicObject = {}\n      content[name] = {}\n      children.forEach(item => {\n        try {\n          let creator = item.currentState.getStateEvents('m.room.create', '')\n          idAndTopicObject[item.roomId] = {\n            creator: creator.event.content.creator,\n            topic: getRoomTopicFromRoomObject(item),\n            content: getRoomTimeline(item.roomId),\n            id: item.roomId,\n          }\n        } catch {\n          return\n        }\n      })\n      content[name] = idAndTopicObject;\n    }\n  })\n  //console.log(content)\n  return content\n}\n\nfunction getChatContent(groupId) {\n  let content = getGroupContent(groupId)\n  return content.chat\n}\n\nfunction getBoardContent(groupId) {\n  let content = getGroupContent(groupId)\n  return content.board\n}\n\nfunction produceHrefAddressesForGroups(rooms) {\n  const roomIds = rooms.map(room => {\n    let id = room.roomId.replace(/:.*/, '')\n    id = id.replace(/!/, '')\n    id = \"/tabs/group/\" + id\n    return id\n  })\n  // roomIds.forEach(roomId => console.log(roomId))\n  return roomIds\n}\n\nfunction getGroups() {\n  let rooms = client.getRooms()\n  console.log(rooms)\n  let roomNamesAndIdsAsObject = {}\n  let roomNames = returnRoomNamesFromRoomObject(rooms)\n  let roomIds = returnRoomIdsFromRoomObject(rooms)\n  let hrefs = produceHrefAddressesForGroups(rooms)\n  let roomHandles = roomIds.map(roomId => getHandleFromRoomId(roomId))\n  let roomTopics = rooms.map(room => getRoomTopicFromRoomObject(room))\n  let roomTypes = roomIds.map(roomId => getRoomType(roomId))\n  let roomProduct = []\n  for (let i = 0; i < roomNames.length; i++) {\n    roomProduct.push({\n      name: roomNames[i],\n      id: roomIds[i],\n      topic: roomTopics[i],\n      type: roomTypes[i],\n      handle: roomHandles[i],\n      href: hrefs[i],\n    })\n  }\n  Object.assign(roomNamesAndIdsAsObject, roomProduct)\n  console.log(rooms)\n  return roomNamesAndIdsAsObject\n}\n\n// SETTERS\n\nfunction createSubSpace(parentSpaceId, subSpaceName, subSpaceTopic, roomId) {\n  client.sendStateEvent(roomId, 'm.space.parent', {\n    via: ['home.parecon.work'],\n    state_key: parentSpaceId,\n    canonical: true,\n  })\n  return\n}\n\n// TODO: add type for space or room\nfunction createGroup(groupName, topic, type) {\n  let topicObject = {\n    text: topic,\n    banner: \"factory\"\n  }\n  let topicString = JSON.stringify(topicObject)\n  client.createRoom({\n    name: groupName,\n    visibility: 'private',\n    topic: topicString,\n    creation_content: {\n      type: 'm.space',\n    }\n  }).then((response) => {\n    // console.log(type)\n    // console.log(`Room created: ${response.room_id}`)\n    //client.sendStateEvent(response.room_id, 'm.room.create', {room_type: 'm.space'})\n  }).catch((error) => {\n    console.error(`Error creating room: ${error}`)\n  })\n}\n\n// TODO: add type for space or room\nfunction createSpace(groupName, topic) {\n  let returnValue = ''\n  client.createRoom({\n    name: groupName,\n    visibility: 'private',\n    topic: topic,\n    creation_content: {\n      type: 'm.space',\n    }\n  }).then((response) => {\n    // console.log(type)\n    console.log(`Room created: ${response.room_id}`)\n    returnValue = response.room_id\n    //client.sendStateEvent(response.room_id, 'm.room.create', {room_type: 'm.space'})\n  }).catch((error) => {\n    console.error(`Error creating room: ${error}`)\n  })\n  return returnValue\n}\n\nfunction assignChild(parentSpaceId, subSpaceId) {\n  client.sendStateEvent(parentSpaceId, 'm.space.child', {\n    via: ['home.parecon.work'],\n  }, subSpaceId).then((error) => {\n    console.log(error)})\n  console.log(\"assigned child\")\n}\n\nfunction assignParent(subSpaceId, parentSpaceId) {\n  client.sendStateEvent(subSpaceId, 'm.space.parent', {\n    canonical: true,\n    via: ['home.parecon.work'],\n  }, parentSpaceId)\n  console.log(\"assigned parent\")\n}\n\nfunction assignParentAndChild(parentSpaceId, subSpaceId) {\n  return\n}\n\nfunction createRealGroup(groupName, topic) {\n  // TODO: add rooms that identify group as parent and canonical parent, and add child identifier on the space.\n  // TODO - power levels will hopefully isolate the rooms as necessary to the space.\n  let mainSpace = createSpace(groupName, topic)\n  let chatSpace = createSpace(\"chat\", '{}')\n  let boardSpace = createSpace(\"board\", '{}')\n  let internalGroup = createGroup(\"groups\", '{}')\n  console.log(mainSpace)\n  return\n}\n\nfunction joinGroup(groupId) {\n  client.joinRoom(groupId).then((response) => {\n    //console.log(`Joined room: ${response.room_id}`)\n  }).catch((error) => {\n    //console.error(`Error joining room: ${error}`)\n  })\n}\n\nasync function getRoomState() {\n  let shortlist = []\n  let shortlistObject = {}\n  let response = await client.roomState(\"!OGEhHVWSdvArJzumhm:matrix.org\")\n    .then((response) => {\n      for (let i = 0; i < 100; i++) {\n        shortlist.push(response[i])\n        Object.assign(shortlistObject, shortlist)\n      }\n      return shortlistObject\n    })\n  //console.log(response)\n  return response\n}\n\nasync function getMessages(roomId) {\n  client.initialSync(roomId).then((response) => {\n    const timeline = response.timeline;\n    console.log(timeline)\n    // Do something with the timeline, such as render it in a chat interface\n  }).catch((error) => {\n    console.error(`Error fetching initial sync for room ${roomId}: ${error}`);\n  })\n}\n\nfunction sendMessage(roomId, message) {\n  const content = {\n    body: \"A hobbit trying to scale mount everest\",\n    msgtype: \"m.text\",\n  }\n  client.sendEvent(\"roomId\", \"m.room.message\", content, \"\", (err, res) => {\n    console.log(err)\n  })\n}\n\nfunction updateTimeline(roomId) {\n  client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n    if (toStartOfTimeline) {\n      var messageToAppend = room.timeline[room.timeline.length - 1]\n      console.log(messageToAppend)\n      console.log(\"wow\")\n      return messageToAppend\n    }\n  })\n}\n\nasync function getMembersOfRoom(roomId) {\n  let room = await client.getRoom(roomId)\n  let members = room.getMembers()\n  console.log(members)\n  return members\n}\n\nfunction sendText(roomId, text) {\n  client.sendTextMessage(roomId, text)\n}\n\nfunction accountData() {\n  return client.getAccountData()\n}\n\n// TODO - Add a getter to get a room's timeline\n// TODO - Get a filter to get a group's associated groups\n// TODO -\n// TODO: Ranking functionality of group membership to curate what appears on top\n// TODO - of the list on group profile. Use the \"suggested\" value of space children\n// TODO - to determine whether the rooms are considered important. Canonical parent\n// TODO - is also useful\n\nexport const useMatrixClient = defineStore('matrix-client', {\n  state: () => {\n    return ({\n      client,\n      getGroups,\n      getOwnProfile,\n      createGroup,\n      getMembersOfRoom,\n      returnIdOfChildrenInSpace,\n      getChildren,\n      getRoomById,\n      getRoomTimeline,\n      getGroupContent,\n      getChatContent,\n      getMessages,\n      login,\n      sendText,\n      accountData,\n      assignParent,\n      assignChild,\n      createRealGroup,\n    })\n  },\n  getters: {\n    getRooms: (state) => () => {\n      return state.getRooms()\n    },\n    updateTimeline: (state) => () => {\n      return updateTimeline()\n    },\n    getRoomState: (state) => () => {\n      return getRoomState()\n    },\n  },\n  setters: {\n    createGroup: (state) => (groupName) => {\n      return state.createGroup(groupName)\n    },\n    login: (state) => () => {\n      return state.login()\n    }\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}