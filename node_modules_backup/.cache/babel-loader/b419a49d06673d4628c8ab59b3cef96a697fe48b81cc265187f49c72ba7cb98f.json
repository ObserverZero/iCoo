{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { defineStore } from 'pinia';\nimport sdk, { EventType } from 'matrix-js-sdk';\nimport { convertCompilerOptionsFromJson } from 'typescript';\nconst loginCreds = {\n  accessToken: process.env.VUE_APP_TOKEN,\n  userId: process.env.VUE_APP_NAME,\n  baseUrl: 'http://localhost:8008'\n};\nconst client = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n  accessToken: loginCreds.accessToken,\n  userId: loginCreds.userId\n});\nconst localClient = sdk.createClient({\n  baseUrl: loginCreds.baseUrl\n});\nclient.startClient();\nfunction createUser(username, password) {\n  // TODO: Add a room for the user that handles additional user information, such as hashtags, description, images,\n  // TODO - friends lists, following, memberships, etc.\n}\nfunction getHandleFromUserId() {\n  return loginCreds.userId.replace(/:.*/, '');\n}\nfunction getHandleFromRoomId(id) {\n  return id.replace(/:.*/, '');\n}\nfunction login() {\n  client.loginWithPassword(process.env.VUE_APP_ID, process.env.VUE_APP_PASS).then(() => {\n    console.log('Logged in!');\n  });\n}\nfunction getIdentifiedListOfGroups(ids) {\n  Object.entries(ids => {\n    console.log(ids.id);\n  });\n}\nasync function getAllUsers() {\n  let users = client.getUsers();\n  return users;\n}\n\n// GETTERS\n\nfunction getRoomTopicFromRoomObject(room) {\n  let topic = room.currentState.getStateEvents('m.room.topic', '');\n  try {\n    return JSON.parse(topic.event.content.topic);\n  } catch (error) {\n    console.log(error);\n    if (topic == String) return topic;\n    return \"We do nothing!\";\n  }\n}\nfunction getRoomType(roomId) {\n  let room = client.getRoom(roomId);\n  let type = room.currentState.getStateEvents('m.room.create', '');\n  try {\n    return type.event.content.type;\n  } catch (error) {\n    return 'no type for you!!';\n  }\n}\nfunction getRoomName(room) {\n  let roomName = room.name;\n  return roomName;\n}\nfunction returnRoomNamesFromRoomObject(rooms) {\n  const roomNames = rooms.map(room => room.name);\n  return roomNames;\n}\nfunction returnRoomIdsFromRoomObject(rooms) {\n  const roomIds = rooms.map(room => room.roomId);\n  return roomIds;\n}\nfunction returnRoomTypeFromRoomObject(rooms) {\n  const roomTypes = rooms.map(room => getRoomType(room.id));\n}\nasync function getRoomById(roomId) {\n  try {\n    let room = await client.getRoom(roomId);\n    const name = room.name;\n    const topic = getRoomTopicFromRoomObject(room);\n    const group = {\n      name: name,\n      topic: topic\n    };\n    return group;\n  } catch (error) {\n    return;\n  }\n}\nfunction updateChat(roomId) {\n  let room = client.getRoom(roomId);\n  let creator = room.currentState.getStateEvents('m.room.create', '');\n  let idAndTopicObject = {\n    id: roomId,\n    creator: creator.event.content.creator.replace(/:.*/, ''),\n    topic: getRoomTopicFromRoomObject(room),\n    content: getRoomTimeline(roomId)\n  };\n  return idAndTopicObject;\n}\nfunction isParent() {\n  return;\n}\nfunction isChild() {\n  return;\n}\nexport async function getOwnProfile() {\n  let responseFromServer = await client.getProfileInfo(loginCreds.userId);\n  responseFromServer.handle = getHandleFromUserId();\n  responseFromServer.displayname = JSON.parse(responseFromServer.displayname);\n  console.log(responseFromServer);\n  return responseFromServer;\n}\nasync function getTimeline(roomId) {\n  return client.roomInitialSync(roomId, 1000);\n}\nasync function setArbitraryEvent(roomId, eventType, content) {\n  return;\n}\nasync function printProfile() {\n  console.log(await client.getProfileInfo(loginCreds.userId));\n}\nfunction getRoomTimeline(roomId) {\n  let room = client.getRoom(roomId);\n  let messageArray = [];\n  room.timeline.forEach(t => {\n    messageArray.push(t.event);\n  });\n  return messageArray;\n}\nfunction getChildrenIds(spaceId) {\n  const space = client.getRoom(spaceId);\n  const childrenMap = space.currentState.events.get('m.space.child');\n  let childrenIdArray = Array.from(childrenMap.keys());\n  return childrenIdArray;\n}\nfunction returnIdOfChildrenInSpace(spaceId) {\n  let space = client.getRoom(spaceId);\n  let childrenMap;\n  try {\n    childrenMap = space.relations.room.currentState.events;\n  } catch (_unused) {\n    return;\n  }\n  let roomArray = [];\n  let roomChildren = [];\n  let arrayOfRoomIds = [];\n  let childrenIds = [];\n  roomArray = Array.from(childrenMap, function (entry) {\n    return {\n      key: entry[0],\n      value: entry[1]\n    };\n  });\n  roomArray.forEach(room => {\n    if (room.key === 'm.space.child') {\n      roomChildren = room.value;\n    }\n  });\n  roomArray = Array.from(roomChildren, function (entry) {\n    return {\n      key: entry[1],\n      value: entry[1]\n    };\n  });\n  roomArray.forEach(room => {\n    arrayOfRoomIds.push(room.value);\n  });\n  console.log(arrayOfRoomIds);\n  return arrayOfRoomIds;\n}\nfunction getChildren(spaceId) {\n  let ids = getChildrenIds(spaceId);\n  let roomObjects = [];\n  ids.forEach(id => {\n    roomObjects.push(client.getRoom(id));\n  });\n  console.log(roomObjects);\n  return roomObjects;\n}\nfunction getGroupContent(groupId) {\n  let content = {};\n  let groups = getChildren(groupId);\n  let name;\n  let id;\n  let children;\n  let idAndTopicObject = {};\n  console.log(groups.length);\n  groups.forEach(child => {\n    if (child != null) {\n      name = child.name;\n      console.log(child.name);\n      id = child.roomId;\n      console.log(id);\n      try {\n        children = getChildren(id);\n      } catch (_unused2) {\n        console.log('no children');\n      }\n      idAndTopicObject = {};\n      content[name] = {};\n      console.log(children);\n      children.forEach(item => {\n        console.log(item);\n        try {\n          let creator = item.currentState.getStateEvents('m.room.create', '');\n          idAndTopicObject[item.roomId] = {\n            id: item.roomId,\n            creator: creator.event.content.creator.replace(/:.*/, ''),\n            topic: getRoomTopicFromRoomObject(item),\n            content: getRoomTimeline(item.roomId)\n          };\n        } catch (_unused3) {\n          console.log('whatever');\n        }\n      });\n      content[name] = {\n        id: id,\n        children: idAndTopicObject\n      };\n    }\n  });\n  console.log(content);\n  return content;\n}\nfunction getChatContent(groupId) {\n  let content = getGroupContent(groupId);\n  return content.chat;\n}\nfunction getSubgroupContent(groupId) {\n  let content = getGroupContent(groupId);\n  return content.groups;\n}\nfunction getBoardContent(groupId) {\n  let content = getGroupContent(groupId);\n  return content.board;\n}\nfunction produceHrefAddressesForGroups(rooms) {\n  const roomIds = rooms.map(room => {\n    let id = room.roomId.replace(/:.*/, '');\n    id = id.replace(/!/, '');\n    id = \"/tabs/group/\" + id;\n    return id;\n  });\n  // roomIds.forEach(roomId => console.log(roomId))\n  return roomIds;\n}\nfunction getGroups() {\n  let rooms = client.getRooms();\n  let roomNamesAndIdsAsObject = {};\n  let roomNames = returnRoomNamesFromRoomObject(rooms);\n  let roomIds = returnRoomIdsFromRoomObject(rooms);\n  let hrefs = produceHrefAddressesForGroups(rooms);\n  let roomHandles = roomIds.map(roomId => getHandleFromRoomId(roomId));\n  let roomTopics = rooms.map(room => getRoomTopicFromRoomObject(room));\n  let roomTypes = roomIds.map(roomId => getRoomType(roomId));\n  let roomProduct = [];\n  for (let i = 0; i < roomNames.length; i++) {\n    roomProduct.push({\n      name: roomNames[i],\n      id: roomIds[i],\n      topic: roomTopics[i],\n      type: roomTypes[i],\n      handle: roomHandles[i],\n      href: hrefs[i]\n    });\n  }\n  Object.assign(roomNamesAndIdsAsObject, roomProduct);\n  return roomNamesAndIdsAsObject;\n}\n\n// SETTERS\n\nfunction createSubSpace(parentSpaceId, subSpaceName, subSpaceTopic, roomId) {\n  client.sendStateEvent(roomId, 'm.space.parent', {\n    via: ['home.parecon.work'],\n    state_key: parentSpaceId,\n    canonical: true\n  });\n  return;\n}\nasync function joinRoomSearchable() {\n  let room = await client.joinRoom('#searchable:home.parecon.work');\n  return room;\n}\nasync function createSpace(groupName, topic, publicorprivate) {\n  let returnValue = await client.createRoom({\n    name: groupName,\n    visibility: 'public',\n    topic: topic,\n    creation_content: {\n      type: 'm.space'\n    },\n    power_lever_content: {\n      \"users\": {\n        creator_id: 100\n      },\n      \"users_default\": 100\n    }\n  }).then(response => {\n    console.log(`Room created: ${response.room_id}`);\n    return response.room_id;\n  }).catch(error => {\n    console.error(`Error creating room: ${error}`);\n  });\n  return returnValue;\n}\nasync function createRoom(roomName, topic) {\n  let returnValue = await client.createRoom({\n    name: roomName,\n    visibility: 'public',\n    topic: topic,\n    power_lever_content: {\n      \"users\": {\n        creator_id: 100\n      },\n      \"users_default\": 100\n    }\n  }).then(response => {\n    console.log(`Room created: ${response.room_id}`);\n    return response.room_id;\n  }).catch(error => {\n    console.error(`Error creating room: ${error}`);\n  });\n  return returnValue;\n}\nasync function createPost(chatSpaceId, topic) {\n  let newRoom = await createRoom(\"post\", topic);\n  assignChild(chatSpaceId, newRoom);\n  assignParent(newRoom, chatSpaceId);\n  return;\n}\nfunction assignChild(parentSpaceId, childSpaceId) {\n  client.sendStateEvent(parentSpaceId, 'm.space.child', {\n    via: ['home.parecon.work']\n  }, childSpaceId).then(error => {\n    console.log(error);\n  });\n  console.log(\"assigned child\");\n}\nfunction assignParent(childSpaceId, parentSpaceId) {\n  client.sendStateEvent(childSpaceId, 'm.space.parent', {\n    canonical: true,\n    via: ['home.parecon.work']\n  }, parentSpaceId);\n  console.log(\"assigned parent\");\n}\nasync function assignParentAndChild(parentSpaceId, childSpaceId) {\n  assignChild(parentSpaceId, childSpaceId);\n  assignParent(childSpaceId, parentSpaceId);\n  return true;\n}\nasync function createRealGroup(groupName, topic) {\n  let mainSpaceId = await createSpace(groupName, '{\"text\": \"' + topic + '\", \"banner\": \"group\"}');\n  let chatSpaceId = await createSpace(\"chat\", '{\"text\": \"chat\", \"banner\": \"group\"}');\n  let boardSpaceId = await createSpace(\"board\", '{\"text\": \"board\", \"banner\": \"group\"}');\n  let calendarSpaceId = await createSpace(\"groups\", '{\"text\": \"groups\", \"banner\": \"group\"}');\n  assignParentAndChild(mainSpaceId, chatSpaceId).then(() => {\n    assignParentAndChild(mainSpaceId, boardSpaceId).then(() => {\n      assignParentAndChild(mainSpaceId, calendarSpaceId);\n    });\n  });\n  return mainSpaceId;\n}\nasync function createSubGroup(groupName, topic, parentGroupSpaceId) {\n  let mainSpaceId = await createRealGroup(groupName, topic);\n  assignParentAndChild(parentGroupSpaceId, mainSpaceId);\n  return;\n}\nfunction joinGroup(groupId) {\n  client.joinRoom(groupId).then(response => {\n    // meh\n  }).catch(error => {\n    // meh\n  });\n}\nasync function getRoomState() {\n  let shortlist = [];\n  let shortlistObject = {};\n  let response = await client.roomState(\"!OGEhHVWSdvArJzumhm:matrix.org\").then(response => {\n    for (let i = 0; i < 100; i++) {\n      shortlist.push(response[i]);\n      Object.assign(shortlistObject, shortlist);\n    }\n    return shortlistObject;\n  });\n  return response;\n}\nasync function checkIfSearchable() {\n  let room = await client.roomState('!ZTKcfJhyKdTvMbfPpD:home.parecon.work');\n  console.log(room);\n}\nasync function getMessages(roomId) {\n  client.initialSync(roomId).then(response => {\n    const timeline = response.timeline;\n    // Do something with the timeline, such as render it in a chat interface\n  }).catch(error => {\n    console.error(`Error fetching initial sync for room ${roomId}: ${error}`);\n  });\n}\nfunction sendMessage(roomId, message) {\n  const content = {\n    body: \"A hobbit trying to scale mount everest\",\n    msgtype: \"m.text\"\n  };\n  client.sendEvent(\"roomId\", \"m.room.message\", content, \"\", (err, res) => {\n    console.log(err);\n  });\n}\nfunction updateTimeline(roomId) {\n  //client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n  //  if (toStartOfTimeline) {\n  //    var messageToAppend = room.timeline[room.timeline.length - 1]\n  //    return messageToAppend\n  //  }\n  //})\n  client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n    if (event.getType() !== \"m.room.message\") {\n      return; // only use messages\n    }\n  });\n}\n\nasync function getMembersOfRoom(roomId) {\n  let room = await client.getRoom(roomId);\n  let members = room.getMembers();\n  return members;\n}\nfunction sendText(roomId, text) {\n  client.sendTextMessage(roomId, text);\n}\nfunction accountData() {\n  return client.getAccountData();\n}\n\n// TODO - Add a getter to get a room's timeline\n// TODO - Get a filter to get a group's associated groups\n// TODO -\n// TODO: Ranking functionality of group membership to curate what appears on top\n// TODO - of the list on group profile. Use the \"suggested\" value of space children\n// TODO - to determine whether the rooms are considered important. Canonical parent\n// TODO - is also useful\n\nexport const useMatrixClient = defineStore('matrix-client', {\n  state: () => {\n    return {\n      client,\n      getGroups,\n      getOwnProfile,\n      getMembersOfRoom,\n      returnIdOfChildrenInSpace,\n      getChildrenIds,\n      getChildren,\n      getRoomById,\n      getRoomTimeline,\n      getGroupContent,\n      getChatContent,\n      getSubgroupContent,\n      getMessages,\n      login,\n      sendText,\n      accountData,\n      assignParent,\n      assignChild,\n      createRealGroup,\n      updateChat,\n      getTimeline,\n      createPost,\n      createSubGroup,\n      joinRoomSearchable,\n      getAllUsers\n    };\n  },\n  getters: {\n    getRooms: state => () => {\n      return state.getRooms();\n    },\n    updateTimeline: state => () => {\n      return updateTimeline();\n    },\n    getRoomState: state => () => {\n      return getRoomState();\n    }\n  },\n  setters: {\n    login: state => () => {\n      return state.login();\n    }\n  }\n});","map":{"version":3,"names":["defineStore","sdk","EventType","convertCompilerOptionsFromJson","loginCreds","accessToken","process","env","VUE_APP_TOKEN","userId","VUE_APP_NAME","baseUrl","client","createClient","localClient","startClient","createUser","username","password","getHandleFromUserId","replace","getHandleFromRoomId","id","login","loginWithPassword","VUE_APP_ID","VUE_APP_PASS","then","console","log","getIdentifiedListOfGroups","ids","Object","entries","getAllUsers","users","getUsers","getRoomTopicFromRoomObject","room","topic","currentState","getStateEvents","JSON","parse","event","content","error","String","getRoomType","roomId","getRoom","type","getRoomName","roomName","name","returnRoomNamesFromRoomObject","rooms","roomNames","map","returnRoomIdsFromRoomObject","roomIds","returnRoomTypeFromRoomObject","roomTypes","getRoomById","group","updateChat","creator","idAndTopicObject","getRoomTimeline","isParent","isChild","getOwnProfile","responseFromServer","getProfileInfo","handle","displayname","getTimeline","roomInitialSync","setArbitraryEvent","eventType","printProfile","messageArray","timeline","forEach","t","push","getChildrenIds","spaceId","space","childrenMap","events","get","childrenIdArray","Array","from","keys","returnIdOfChildrenInSpace","relations","roomArray","roomChildren","arrayOfRoomIds","childrenIds","entry","key","value","getChildren","roomObjects","getGroupContent","groupId","groups","children","length","child","item","getChatContent","chat","getSubgroupContent","getBoardContent","board","produceHrefAddressesForGroups","getGroups","getRooms","roomNamesAndIdsAsObject","hrefs","roomHandles","roomTopics","roomProduct","i","href","assign","createSubSpace","parentSpaceId","subSpaceName","subSpaceTopic","sendStateEvent","via","state_key","canonical","joinRoomSearchable","joinRoom","createSpace","groupName","publicorprivate","returnValue","createRoom","visibility","creation_content","power_lever_content","creator_id","response","room_id","catch","createPost","chatSpaceId","newRoom","assignChild","assignParent","childSpaceId","assignParentAndChild","createRealGroup","mainSpaceId","boardSpaceId","calendarSpaceId","createSubGroup","parentGroupSpaceId","joinGroup","getRoomState","shortlist","shortlistObject","roomState","checkIfSearchable","getMessages","initialSync","sendMessage","message","body","msgtype","sendEvent","err","res","updateTimeline","on","toStartOfTimeline","getType","getMembersOfRoom","members","getMembers","sendText","text","sendTextMessage","accountData","getAccountData","useMatrixClient","state","getters","setters"],"sources":["/Users/observerzero/Project/Dev/icoo/src/stores/MatrixClient.js"],"sourcesContent":["import {defineStore} from 'pinia'\nimport sdk, {EventType} from 'matrix-js-sdk'\nimport { convertCompilerOptionsFromJson } from 'typescript'\n\nconst loginCreds = {\n  accessToken: process.env.VUE_APP_TOKEN,\n  userId: process.env.VUE_APP_NAME,\n  baseUrl: 'http://localhost:8008'\n}\n\nconst client = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n  accessToken: loginCreds.accessToken,\n  userId: loginCreds.userId,\n})\n\nconst localClient = sdk.createClient({\n  baseUrl: loginCreds.baseUrl,\n})\n\nclient.startClient()\n\nfunction createUser(username, password) {\n  // TODO: Add a room for the user that handles additional user information, such as hashtags, description, images,\n  // TODO - friends lists, following, memberships, etc.\n}\n\nfunction getHandleFromUserId() {\n  return loginCreds.userId.replace(/:.*/, '')\n}\n\nfunction getHandleFromRoomId(id) {\n  return id.replace(/:.*/, '')\n}\n\nfunction login() {\n  client.loginWithPassword(process.env.VUE_APP_ID, process.env.VUE_APP_PASS).then(() => {\n    console.log('Logged in!')\n  })\n}\n\nfunction getIdentifiedListOfGroups(ids) {\n  Object.entries(ids => {\n    console.log(ids.id)\n  })\n}\n\nasync function getAllUsers() {\n  let users = client.getUsers()\n  return users\n}\n\n// GETTERS\n\nfunction getRoomTopicFromRoomObject(room) {\n  let topic = room.currentState.getStateEvents('m.room.topic', '')\n  try {\n    return JSON.parse(topic.event.content.topic)\n  } catch (error) {\n    console.log(error)\n    if (topic == String)\n      return topic\n    return \"We do nothing!\"\n  }\n}\n\nfunction getRoomType(roomId) {\n  let room = client.getRoom(roomId)\n  let type = room.currentState.getStateEvents('m.room.create', '')\n  try {\n    return type.event.content.type\n  } catch (error) {\n    return 'no type for you!!'\n  }\n}\n\nfunction getRoomName(room) {\n  let roomName = room.name\n  return roomName\n}\n\nfunction returnRoomNamesFromRoomObject(rooms) {\n  const roomNames = rooms.map(room => room.name)\n  return roomNames\n}\n\nfunction returnRoomIdsFromRoomObject(rooms) {\n  const roomIds = rooms.map(room => room.roomId)\n  return roomIds\n}\n\nfunction returnRoomTypeFromRoomObject(rooms) {\n  const roomTypes = rooms.map(room => getRoomType(room.id))\n}\n\nasync function getRoomById(roomId) {\n  try {\n    let room = await client.getRoom(roomId)\n    const name = room.name\n    const topic = getRoomTopicFromRoomObject(room)\n    const group = {\n      name: name,\n      topic: topic,\n    }\n    return group\n  } catch (error) {\n    return\n  }\n}\n\nfunction updateChat(roomId) {\n  let room = client.getRoom(roomId)\n  let creator = room.currentState.getStateEvents('m.room.create', '')\n  let idAndTopicObject = {\n    id: roomId,\n    creator: creator.event.content.creator.replace(/:.*/, ''),\n    topic: getRoomTopicFromRoomObject(room),\n    content: getRoomTimeline(roomId),\n  }\n  return idAndTopicObject\n}\n\nfunction isParent() {\n  return\n}\n\nfunction isChild() {\n  return\n}\n\nexport async function getOwnProfile() {\n  let responseFromServer = await client.getProfileInfo(loginCreds.userId)\n  responseFromServer.handle = getHandleFromUserId()\n  responseFromServer.displayname = JSON.parse(responseFromServer.displayname)\n  console.log(responseFromServer)\n  return responseFromServer\n}\n\nasync function getTimeline(roomId) {\n  return client.roomInitialSync(roomId, 1000)\n}\n\nasync function setArbitraryEvent(roomId, eventType, content) {\n  return\n}\n\nasync function printProfile() {\n  console.log(await client.getProfileInfo(loginCreds.userId))\n}\n\nfunction getRoomTimeline(roomId) {\n  let room = client.getRoom(roomId)\n  let messageArray = []\n  room.timeline.forEach(t => {\n    messageArray.push(t.event)\n  });\n  return messageArray\n}\n\nfunction getChildrenIds(spaceId) {\n  const space = client.getRoom(spaceId)\n  const childrenMap = space.currentState.events.get('m.space.child')\n  let childrenIdArray = Array.from( childrenMap.keys() )\n  return childrenIdArray\n}\n\nfunction returnIdOfChildrenInSpace(spaceId) {\n  let space = client.getRoom(spaceId)\n  let childrenMap\n  try {\n    childrenMap = space.relations.room.currentState.events\n  } catch {\n    return\n  }\n  let roomArray = []\n  let roomChildren = []\n  let arrayOfRoomIds = []\n  let childrenIds = []\n  roomArray = Array.from(childrenMap, function (entry) {\n    return {key: entry[0], value: entry[1]};\n  });\n  roomArray.forEach(room => {\n    if (room.key === 'm.space.child') {\n      roomChildren = room.value\n    }\n  })\n  roomArray = Array.from(roomChildren, function (entry) {\n    return {key: entry[1], value: entry[1]};\n  });\n  roomArray.forEach(room => {\n    arrayOfRoomIds.push(room.value)\n  })\n  console.log(arrayOfRoomIds)\n  return arrayOfRoomIds\n}\n\nfunction getChildren(spaceId) {\n  let ids = getChildrenIds(spaceId)\n  let roomObjects = []\n  ids.forEach(id => {\n    roomObjects.push(client.getRoom(id))\n  })\n  console.log(roomObjects)\n  return roomObjects\n}\n\nfunction getGroupContent(groupId) {\n  let content = {}\n  let groups = getChildren(groupId)\n  let name\n  let id\n  let children\n  let idAndTopicObject = {}\n  console.log(groups.length)\n  groups.forEach(child => {\n    if (child != null) {\n      name = child.name\n      console.log(child.name)\n      id = child.roomId\n      console.log(id)\n      try {\n        children = getChildren(id)\n      } catch {\n        console.log('no children')\n      }\n      idAndTopicObject = {}\n      content[name] = {}\n      console.log(children)\n      children.forEach(item => {\n        console.log(item)\n        try {\n          let creator = item.currentState.getStateEvents('m.room.create', '')\n          idAndTopicObject[item.roomId] = {\n            id: item.roomId,\n            creator: creator.event.content.creator.replace(/:.*/, ''),\n            topic: getRoomTopicFromRoomObject(item),\n            content: getRoomTimeline(item.roomId),\n          }\n        } catch {\n          console.log('whatever')\n        }\n      })\n      content[name] = {\n        id: id,\n        children: idAndTopicObject,\n      }\n    }\n  })\n  console.log(content)\n  return content\n}\n\nfunction getChatContent(groupId) {\n  let content = getGroupContent(groupId)\n  return content.chat\n}\n\nfunction getSubgroupContent(groupId) {\n  let content = getGroupContent(groupId)\n  return content.groups\n}\n\nfunction getBoardContent(groupId) {\n  let content = getGroupContent(groupId)\n  return content.board\n}\n\nfunction produceHrefAddressesForGroups(rooms) {\n  const roomIds = rooms.map(room => {\n    let id = room.roomId.replace(/:.*/, '')\n    id = id.replace(/!/, '')\n    id = \"/tabs/group/\" + id\n    return id\n  })\n  // roomIds.forEach(roomId => console.log(roomId))\n  return roomIds\n}\n\nfunction getGroups() {\n  let rooms = client.getRooms()\n  let roomNamesAndIdsAsObject = {}\n  let roomNames = returnRoomNamesFromRoomObject(rooms)\n  let roomIds = returnRoomIdsFromRoomObject(rooms)\n  let hrefs = produceHrefAddressesForGroups(rooms)\n  let roomHandles = roomIds.map(roomId => getHandleFromRoomId(roomId))\n  let roomTopics = rooms.map(room => getRoomTopicFromRoomObject(room))\n  let roomTypes = roomIds.map(roomId => getRoomType(roomId))\n  let roomProduct = []\n  for (let i = 0; i < roomNames.length; i++) {\n    roomProduct.push({\n      name: roomNames[i],\n      id: roomIds[i],\n      topic: roomTopics[i],\n      type: roomTypes[i],\n      handle: roomHandles[i],\n      href: hrefs[i],\n    })\n  }\n  Object.assign(roomNamesAndIdsAsObject, roomProduct)\n  return roomNamesAndIdsAsObject\n}\n\n// SETTERS\n\nfunction createSubSpace(parentSpaceId, subSpaceName, subSpaceTopic, roomId) {\n  client.sendStateEvent(roomId, 'm.space.parent', {\n    via: ['home.parecon.work'],\n    state_key: parentSpaceId,\n    canonical: true,\n  })\n  return\n}\n\nasync function joinRoomSearchable() {\n  let room = await client.joinRoom('#searchable:home.parecon.work')\n  return room\n}\n\nasync function createSpace(groupName, topic, publicorprivate) {\n  let returnValue = await client.createRoom({\n    name: groupName,\n    visibility: 'public',\n    topic: topic,\n    creation_content: {\n      type: 'm.space',\n    },\n    power_lever_content: {\n      \"users\": {creator_id: 100},\n      \"users_default\": 100,\n    }\n  }).then((response) => {\n    console.log(`Room created: ${response.room_id}`)\n    return response.room_id\n  }).catch((error) => {\n    console.error(`Error creating room: ${error}`)\n  })\n  return returnValue\n}\n\nasync function createRoom(roomName, topic) {\n  let returnValue = await client.createRoom({\n    name: roomName,\n    visibility: 'public',\n    topic: topic,\n    power_lever_content: {\n      \"users\": {creator_id: 100},\n      \"users_default\": 100,\n    }\n  }).then((response) => {\n    console.log(`Room created: ${response.room_id}`)\n    return response.room_id\n  }).catch((error) => {\n    console.error(`Error creating room: ${error}`)\n  })\n  return returnValue\n}\n\nasync function createPost(chatSpaceId, topic) {\n  let newRoom = await createRoom(\"post\", topic)\n  assignChild(chatSpaceId, newRoom)\n  assignParent(newRoom, chatSpaceId)\n  return\n}\n\nfunction assignChild(parentSpaceId, childSpaceId) {\n  client.sendStateEvent(parentSpaceId, 'm.space.child', {\n    via: ['home.parecon.work'],\n  }, childSpaceId).then((error) => {\n    console.log(error)})\n  console.log(\"assigned child\")\n}\n\nfunction assignParent(childSpaceId, parentSpaceId) {\n  client.sendStateEvent(childSpaceId, 'm.space.parent', {\n    canonical: true,\n    via: ['home.parecon.work'],\n  }, parentSpaceId)\n  console.log(\"assigned parent\")\n}\n\nasync function assignParentAndChild(parentSpaceId, childSpaceId) {\n  assignChild(parentSpaceId, childSpaceId)\n  assignParent(childSpaceId, parentSpaceId)\n  return true\n}\n\nasync function createRealGroup(groupName, topic) {\n  let mainSpaceId = await createSpace(groupName, '{\"text\": \"' + topic + '\", \"banner\": \"group\"}')\n  let chatSpaceId = await createSpace(\"chat\", '{\"text\": \"chat\", \"banner\": \"group\"}')\n  let boardSpaceId = await createSpace(\"board\", '{\"text\": \"board\", \"banner\": \"group\"}')\n  let calendarSpaceId = await createSpace(\"groups\", '{\"text\": \"groups\", \"banner\": \"group\"}')\n  assignParentAndChild(mainSpaceId, chatSpaceId).then(() => {\n    assignParentAndChild(mainSpaceId, boardSpaceId).then(() => {\n      assignParentAndChild(mainSpaceId, calendarSpaceId)\n    })\n  })\n  return mainSpaceId\n}\n\nasync function createSubGroup(groupName, topic, parentGroupSpaceId) {\n  let mainSpaceId = await createRealGroup(groupName, topic)\n  assignParentAndChild(parentGroupSpaceId, mainSpaceId)\n  return\n}\n\nfunction joinGroup(groupId) {\n  client.joinRoom(groupId).then((response) => {\n    // meh\n  }).catch((error) => {\n    // meh\n  })\n}\n\nasync function getRoomState() {\n  let shortlist = []\n  let shortlistObject = {}\n  let response = await client.roomState(\"!OGEhHVWSdvArJzumhm:matrix.org\")\n    .then((response) => {\n      for (let i = 0; i < 100; i++) {\n        shortlist.push(response[i])\n        Object.assign(shortlistObject, shortlist)\n      }\n      return shortlistObject\n    })\n  return response\n}\n\nasync function checkIfSearchable() {\n  let room = await client.roomState('!ZTKcfJhyKdTvMbfPpD:home.parecon.work')\n  console.log(room)\n}\n\nasync function getMessages(roomId) {\n  client.initialSync(roomId).then((response) => {\n    const timeline = response.timeline;\n    // Do something with the timeline, such as render it in a chat interface\n  }).catch((error) => {\n    console.error(`Error fetching initial sync for room ${roomId}: ${error}`);\n  })\n}\n\nfunction sendMessage(roomId, message) {\n  const content = {\n    body: \"A hobbit trying to scale mount everest\",\n    msgtype: \"m.text\",\n  }\n  client.sendEvent(\"roomId\", \"m.room.message\", content, \"\", (err, res) => {\n    console.log(err)\n  })\n}\n\nfunction updateTimeline(roomId) {\n  //client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n  //  if (toStartOfTimeline) {\n  //    var messageToAppend = room.timeline[room.timeline.length - 1]\n  //    return messageToAppend\n  //  }\n  //})\n  client.on(\"Room.timeline\", function (event, room, toStartOfTimeline) {\n    if (event.getType() !== \"m.room.message\") {\n      return; // only use messages\n    }\n})\n}\n\nasync function getMembersOfRoom(roomId) {\n  let room = await client.getRoom(roomId)\n  let members = room.getMembers()\n  return members\n}\n\nfunction sendText(roomId, text) {\n  client.sendTextMessage(roomId, text)\n}\n\nfunction accountData() {\n  return client.getAccountData()\n}\n\n// TODO - Add a getter to get a room's timeline\n// TODO - Get a filter to get a group's associated groups\n// TODO -\n// TODO: Ranking functionality of group membership to curate what appears on top\n// TODO - of the list on group profile. Use the \"suggested\" value of space children\n// TODO - to determine whether the rooms are considered important. Canonical parent\n// TODO - is also useful\n\nexport const useMatrixClient = defineStore('matrix-client', {\n  state: () => {\n    return ({\n      client,\n      getGroups,\n      getOwnProfile,\n      getMembersOfRoom,\n      returnIdOfChildrenInSpace,\n      getChildrenIds,\n      getChildren,\n      getRoomById,\n      getRoomTimeline,\n      getGroupContent,\n      getChatContent,\n      getSubgroupContent,\n      getMessages,\n      login,\n      sendText,\n      accountData,\n      assignParent,\n      assignChild,\n      createRealGroup,\n      updateChat,\n      getTimeline,\n      createPost,\n      createSubGroup,\n      joinRoomSearchable,\n      getAllUsers,\n    })\n  },\n  getters: {\n    getRooms: (state) => () => {\n      return state.getRooms()\n    },\n    updateTimeline: (state) => () => {\n      return updateTimeline()\n    },\n    getRoomState: (state) => () => {\n      return getRoomState()\n    },\n  },\n  setters: {\n    login: (state) => () => {\n      return state.login()\n    }\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}